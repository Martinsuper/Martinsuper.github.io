<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="我的第一篇文章 # 我的第一篇博客，欢迎大家关注。 Hugo 是一个静态网站生成器，它使用 Go 语言开发。
最近部署前端项目的时候感觉很麻烦，每次改好代码都需要手动上传文件到阿里云OSS，今天决定使用 GitHub Actions 自动化打包部署到阿里云 OSS。
设置 GitHub 机密变量 # 因为阿里云上传需要 access_key_id、access_key_secret 等敏感信息，这种信息不方法放到仓库或者 workflow 里面，放到 GitHub secrets 里面就比较合适了。
配置如下图
配置 GitHub Actions 具体配置如下图：
name: Deploy to Aliyun OSS on: push: branches: - main jobs: deploy: runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v3 - name: Set up Node.js uses: actions/setup-node@v3 with: node-version: '16' - name: Install dependencies working-directory: ./seed-vite run: | npm install npm run build - name: Install ossutil run: | curl https://gosspublic."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/docs/my-first-post/"><meta property="og:site_name" content="My New Hugo Site"><meta property="og:title" content="我的第一篇文章"><meta property="og:description" content="我的第一篇文章 # 我的第一篇博客，欢迎大家关注。 Hugo 是一个静态网站生成器，它使用 Go 语言开发。
最近部署前端项目的时候感觉很麻烦，每次改好代码都需要手动上传文件到阿里云OSS，今天决定使用 GitHub Actions 自动化打包部署到阿里云 OSS。
设置 GitHub 机密变量 # 因为阿里云上传需要 access_key_id、access_key_secret 等敏感信息，这种信息不方法放到仓库或者 workflow 里面，放到 GitHub secrets 里面就比较合适了。
配置如下图
配置 GitHub Actions 具体配置如下图：
name: Deploy to Aliyun OSS on: push: branches: - main jobs: deploy: runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v3 - name: Set up Node.js uses: actions/setup-node@v3 with: node-version: '16' - name: Install dependencies working-directory: ./seed-vite run: | npm install npm run build - name: Install ossutil run: | curl https://gosspublic."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>我的第一篇文章 | My New Hugo Site</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=http://localhost:1313/docs/my-first-post/><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.f2f6e3b07ab4691e85bcf43e0fd9b666a60682edb14a48023bf3ea1ba7de1f58.js integrity="sha256-8vbjsHq0aR6FvPQ+D9m2ZqYGgu2xSkgCO/PqG6feH1g=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>My New Hugo Site</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/docs/my-first-post/ class=active>我的第一篇文章</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>我的第一篇文章</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#设置-github-机密变量>设置 GitHub 机密变量</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=我的第一篇文章>我的第一篇文章
<a class=anchor href=#%e6%88%91%e7%9a%84%e7%ac%ac%e4%b8%80%e7%af%87%e6%96%87%e7%ab%a0>#</a></h1><p>我的第一篇博客，欢迎大家关注。
Hugo 是一个静态网站生成器，它使用 Go 语言开发。</p><blockquote><p>最近部署前端项目的时候感觉很麻烦，每次改好代码都需要手动上传文件到阿里云OSS，今天决定使用 GitHub Actions 自动化打包部署到阿里云 OSS。</p></blockquote><h2 id=设置-github-机密变量>设置 GitHub 机密变量
<a class=anchor href=#%e8%ae%be%e7%bd%ae-github-%e6%9c%ba%e5%af%86%e5%8f%98%e9%87%8f>#</a></h2><blockquote><p>因为阿里云上传需要 access_key_id、access_key_secret 等敏感信息，这种信息不方法放到仓库或者 workflow 里面，放到 GitHub secrets 里面就比较合适了。</p></blockquote><p>配置如下图</p><p><img src=https://mrtduan.oss-cn-shanghai.aliyuncs.com/blog/b9e0c968-d7f8-4a78-af47-a2023908c4b6.png alt=Description></p><p>配置 GitHub Actions
<img src=https://mrtduan.oss-cn-shanghai.aliyuncs.com/blog/fc3e98bc-262d-462c-9d7f-52f6cffb2d3e.png alt=Description>
具体配置如下图：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy to Aliyun OSS</span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main </span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout code</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Set up Node.js</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-node@v3</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>node-version</span>: <span style=color:#e6db74>&#39;16&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Install dependencies</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>working-directory</span>: <span style=color:#ae81ff>./seed-vite  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          npm install 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          npm run build  </span>          
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Install ossutil</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        curl https://gosspublic.alicdn.com/ossutil/install.sh | sudo bash</span>        
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy to OSS</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>working-directory</span>: <span style=color:#ae81ff>./seed-vite  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>OSS_ACCESS_KEY_ID</span>: <span style=color:#ae81ff>${{ secrets.ALIPAY_ACCESS_KEY_ID }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>OSS_ACCESS_KEY_SECRET</span>: <span style=color:#ae81ff>${{ secrets.ALIPAY_ACCESS_KEY_SECRET }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>OSS_BUCKET</span>: <span style=color:#ae81ff>${{ secrets.OSS_BUCKET_NAME }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>OSS_ENDPOINT</span>: <span style=color:#ae81ff>${{ secrets.OSS_ENDPOINT }}</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ossutil config -e $OSS_ENDPOINT -i $OSS_ACCESS_KEY_ID -k $OSS_ACCESS_KEY_SECRET
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ossutil cp -rf ./dist oss://$OSS_BUCKET/ --acl public-read</span>        
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#设置-github-机密变量>设置 GitHub 机密变量</a></li></ul></nav></div></aside></main></body></html>